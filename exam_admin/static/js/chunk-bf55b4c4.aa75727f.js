(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-bf55b4c4"],{"1ef0":function(e,t,n){"use strict";n.r(t);var o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-button",{staticClass:"add-button",attrs:{type:"primary",icon:"el-icon-plus",size:"mini"},on:{click:e.openAddDialog}},[e._v("添加")]),e._v(" "),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.rolelist,border:"",fit:""}},[n("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.menuList,(function(o,l){return n("el-row",{key:o.id,class:["bdbottom",0===l?"bdtop":"","vcenter"]},[n("el-col",{attrs:{span:5}},[n("el-tag",{attrs:{closable:""},on:{close:function(n){return e.removeRightById(t.row,o.id)}}},[e._v(e._s(o.name))]),e._v(" "),n("i",{staticClass:"el-icon-caret-right"})],1),e._v(" "),n("el-col",{attrs:{span:19}},e._l(o.childList,(function(o,l){return n("el-row",{key:o.id,class:[0===l?"":"bdtop","vcenter"]},[n("el-col",{attrs:{span:6}},[n("el-tag",{attrs:{type:"success",closable:""},on:{close:function(n){return e.removeRightById(t.row,o.id)}}},[e._v(e._s(o.name))]),e._v(" "),n("i",{staticClass:"el-icon-caret-right"})],1),e._v(" "),n("el-col",{attrs:{span:18}},e._l(o.childList,(function(o){return n("el-tag",{key:o.id,attrs:{type:"warning",closable:""},on:{close:function(n){return e.removeRightById(t.row,o.id)}}},[e._v("\n                  "+e._s(o.name)+"\n                ")])})),1)],1)})),1)],1)}))}}])}),e._v(" "),n("el-table-column",{attrs:{prop:"roleName","min-width":"100",label:"角色名称",align:"center"}}),e._v(" "),n("el-table-column",{attrs:{prop:"createdTime",label:"创建时间","min-width":"220",align:"center",sortable:"custom"}}),e._v(" "),n("el-table-column",{attrs:{prop:"updateTime",label:"更新时间","min-width":"220",align:"center",sortable:"custom"}}),e._v(" "),n("el-table-column",{attrs:{prop:"enable",label:"状态",width:"150",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[1===t.row.isEnabled?n("el-tag",[e._v("启用")]):n("el-tag",{attrs:{type:"info"}},[e._v("弃用")])]}}])}),e._v(" "),n("el-table-column",{attrs:{prop:"remark","min-width":"100",label:"备注",align:"center"}}),e._v(" "),n("el-table-column",{attrs:{label:"操作","min-width":"500",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{size:"mini",type:"warning",icon:"el-icon-setting"},on:{click:function(n){return e.handleSelectMenu(t.row)}}},[e._v("分配权限")]),e._v(" "),n("el-button",{attrs:{size:"mini",type:"primary",icon:"el-icon-edit"},on:{click:function(n){return e.toUpdate(t.row.roleId)}}},[e._v("修改")]),e._v(" "),0===t.row.isEnabled?n("el-button",{attrs:{icon:"el-icon-check",size:"mini",type:"success"},on:{click:function(n){return e.toEnable(t.row.roleId)}}},[e._v("启用")]):e._e(),e._v(" "),1===t.row.isEnabled?n("el-button",{attrs:{icon:"el-icon-close",size:"mini",type:"warning"},on:{click:function(n){return e.toDisable(t.row.roleId)}}},[e._v("弃用")]):e._e(),e._v(" "),n("el-button",{attrs:{size:"mini",type:"danger",icon:"el-icon-delete"},on:{click:function(n){return e.toDelete(t.row.roleId)}}},[e._v("删除")])]}}])})],1),e._v(" "),n("el-dialog",{attrs:{title:"分配权限和菜单",visible:e.selectMenuOpen,width:"400px",center:"","append-to-body":""},on:{"update:visible":function(t){e.selectMenuOpen=t}}},[n("el-tree",{ref:"menu",attrs:{data:e.menuOptions,"show-checkbox":"","node-key":"menuId","highlight-current":"","empty-text":"加载中，请稍后",props:{id:"menuId",children:"children",label:"name"}}}),e._v(" "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{type:"primary"},on:{click:e.handleSelectMenuSubmit}},[e._v("确 定")]),e._v(" "),n("el-button",{on:{click:e.cancelSelectMenu}},[e._v("取 消")])],1)],1),e._v(" "),n("el-dialog",{attrs:{title:"添加角色",visible:e.addDialog,width:"600px",center:""},on:{"update:visible":function(t){e.addDialog=t}}},[n("role-add",{on:{closeAddDialog:e.closeAddDialog,list:e.list}})],1),e._v(" "),n("el-dialog",{attrs:{title:"修改角色",visible:e.updateDialog,width:"600px",center:""},on:{"update:visible":function(t){e.updateDialog=t}}},[n("role-update",{attrs:{role:e.role},on:{closeUpdateDialog:e.closeUpdateDialog,list:e.list}})],1)],1)},l=[],a=n("929f"),r=n("3fa8"),c=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-form",{ref:"form",staticClass:"demo-ruleForm",attrs:{model:e.role,rules:e.rules,"label-width":"80px"}},[n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{label:"角色名称",prop:"roleName"}},[n("el-input",{attrs:{placeholder:"请输入角色名称"},model:{value:e.role.roleName,callback:function(t){e.$set(e.role,"roleName",t)},expression:"role.roleName"}})],1)],1),e._v(" "),n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{label:"角色备注"}},[n("el-input",{attrs:{placeholder:"请输入角色备注"},model:{value:e.role.remark,callback:function(t){e.$set(e.role,"remark",t)},expression:"role.remark"}})],1)],1),e._v(" "),n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{label:"角色状态",prop:"isEnabled"}},[n("el-radio-group",{model:{value:e.role.isEnabled,callback:function(t){e.$set(e.role,"isEnabled",t)},expression:"role.isEnabled"}},[n("el-radio",{attrs:{label:1}},[e._v("启用")]),e._v(" "),n("el-radio",{attrs:{label:0}},[e._v("弃用")])],1)],1)],1),e._v(" "),n("el-col",{attrs:{span:12,offset:5}},[n("el-form-item",[n("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("提交")]),e._v(" "),n("el-button",{on:{click:e.close}},[e._v("取消")])],1)],1)],1)],1)],1)},i=[],s={data:function(){return{role:{},rules:{roleName:[{required:!0,message:"角色名称不能为空",tirgger:"blur"}],isEnabled:[{required:!0,message:"请选择角色状态",trigger:"change"}]}}},methods:{onSubmit:function(){var e=this;a["a"].save(this.role).then((function(t){e.$message.success(t.msg),e.$emit("closeAddDialog"),e.$emit("list"),e.resetForm("form")}))},close:function(){this.$emit("closeAddDialog"),this.resetForm("form")}}},u=s,d=n("2877"),m=Object(d["a"])(u,c,i,!1,null,null,null),f=m.exports,p=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-form",{ref:"form",staticClass:"demo-ruleForm",attrs:{model:e.role,rules:e.rules,"label-width":"80px"}},[n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{label:"角色名称",prop:"roleName"}},[n("el-input",{attrs:{placeholder:"请输入角色名称"},model:{value:e.role.roleName,callback:function(t){e.$set(e.role,"roleName",t)},expression:"role.roleName"}})],1)],1),e._v(" "),n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{label:"角色备注"}},[n("el-input",{attrs:{placeholder:"请输入角色备注"},model:{value:e.role.remark,callback:function(t){e.$set(e.role,"remark",t)},expression:"role.remark"}})],1)],1),e._v(" "),n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{label:"角色状态",prop:"isEnabled"}},[n("el-radio-group",{model:{value:e.role.isEnabled,callback:function(t){e.$set(e.role,"isEnabled",t)},expression:"role.isEnabled"}},[n("el-radio",{attrs:{label:1}},[e._v("启用")]),e._v(" "),n("el-radio",{attrs:{label:0}},[e._v("弃用")])],1)],1)],1),e._v(" "),n("el-col",{attrs:{span:12,offset:5}},[n("el-form-item",[n("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("提交")]),e._v(" "),n("el-button",{on:{click:e.close}},[e._v("取消")])],1)],1)],1)],1)],1)},b=[],g={props:{role:{type:Object,default:null}},data:function(){return{rules:{roleName:[{required:!0,message:"角色名称不能为空",tirgger:"blur"}],isEnabled:[{required:!0,message:"请选择角色状态",trigger:"change"}]}}},methods:{onSubmit:function(){var e=this;a["a"].update(this.role).then((function(t){e.$message.success(t.msg),e.$emit("closeUpdateDialog"),e.$emit("list"),e.resetForm("form")}))},close:function(){this.$emit("closeUpdateDialog"),this.resetForm("form")}}},h=g,v=Object(d["a"])(h,p,b,!1,null,null,null),_=v.exports,y={components:{RoleAdd:f,RoleUpdate:_},data:function(){return{role:{},loading:!0,addDialog:!1,updateDialog:!1,currentRoleId:void 0,selectMenuOpen:!1,menuOptions:[],rolelist:[]}},created:function(){this.list()},methods:{list:function(){var e=this;this.loading=!0,a["a"].list().then((function(t){e.rolelist=t.data,e.loading=!1,console.log(t)}))},toUpdate:function(e){var t=this;a["a"].get(e).then((function(e){t.role=e.data,t.updateDialog=!0}))},toEnable:function(e){var t=this;this.$confirm("是否启用？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){a["a"].enable(e).then((function(e){t.$message.success(e.msg),t.list()}))})).catch((function(){t.$message({type:"info",message:"已取消启用"})}))},toDisable:function(e){var t=this;this.$confirm("是否弃用?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){a["a"].disable(e).then((function(e){t.$message.success(e.msg),t.list()}))})).catch((function(){t.$message({type:"info",message:"已取消弃用"})}))},toDelete:function(e){var t=this;this.$confirm("是否删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){a["a"].delete(e).then((function(e){t.$message.success(e.msg),t.list()}))})).catch((function(){t.$message({type:"info",message:"已取消删除"})}))},removeRightById:function(){},handleSelectMenu:function(e){var t=this;this.currentRoleId=e.roleId||this.ids[0],this.title="分配权限和菜单",this.selectMenuOpen=!0,r["a"].getMenuTree().then((function(e){t.menuOptions=t.handleTree(e.data,"menuId")})),a["a"].getMenuIdsByRoleId(this.currentRoleId).then((function(e){t.$refs.menu.setCheckedKeys(e.data)}))},handleSelectMenuSubmit:function(){var e=this,t=this.$refs.menu.getCheckedKeys(),n=this.$refs.menu.getHalfCheckedKeys(),o=n.concat(t);console.log(o),a["a"].saveRoleMenu(this.currentRoleId,o).then((function(t){e.msgSuccess("分配成功")})).catch((function(){e.msgSuccess("分配失败")}))},cancelSelectMenu:function(){this.selectMenuOpen=!1,this.menuOptions=[]},openAddDialog:function(){this.addDialog=!0},closeAddDialog:function(){this.addDialog=!1},closeUpdateDialog:function(){this.updateDialog=!1}}},w=y,k=(n("77c8"),Object(d["a"])(w,o,l,!1,null,"9754b83c",null));t["default"]=k.exports},"1f5d":function(e,t,n){},"3fa8":function(e,t,n){"use strict";var o=n("b775"),l="menu";t["a"]={save:function(e){return Object(o["a"])({url:"/".concat(l,"/save"),method:"post",data:e})},delete:function(e){return Object(o["a"])({url:"/".concat(l,"/deleteById/").concat(e),method:"delete",data:e})},deleteByIds:function(e){return Object(o["a"])({url:"/".concat(l,"/deleteByIds"),method:"put",data:e})},update:function(e){return Object(o["a"])({url:"/".concat(l,"/update"),method:"put",data:e})},get:function(e){return Object(o["a"])({url:"/".concat(l,"/getById/").concat(e),method:"get",data:e})},getByPage:function(e){return Object(o["a"])({url:"/".concat(l,"/getByPage"),method:"post",data:e})},list:function(){return Object(o["a"])({url:"/".concat(l,"/list"),method:"get"})},getMenuTree:function(){return Object(o["a"])({url:"/".concat(l,"/getMenuTree"),method:"get"})},enable:function(e){return Object(o["a"])({url:"/".concat(l,"/enable/").concat(e),method:"put",data:e})},disable:function(e){return Object(o["a"])({url:"/".concat(l,"/disable/").concat(e),method:"put",data:e})}}},"77c8":function(e,t,n){"use strict";var o=n("1f5d"),l=n.n(o);l.a},"929f":function(e,t,n){"use strict";var o=n("b775"),l="role";t["a"]={save:function(e){return Object(o["a"])({url:"/".concat(l,"/save"),method:"post",data:e})},delete:function(e){return Object(o["a"])({url:"/".concat(l,"/deleteById/").concat(e),method:"delete",data:e})},update:function(e){return Object(o["a"])({url:"/".concat(l,"/update"),method:"put",data:e})},get:function(e){return Object(o["a"])({url:"/".concat(l,"/getById/").concat(e),method:"get",data:e})},selectAllRole:function(){return Object(o["a"])({url:"/".concat(l,"/selectAllRole"),method:"get"})},getMenuIdsByRoleId:function(e){return Object(o["a"])({url:"/".concat(l,"/getMenuIdsByRoleId/").concat(e),method:"get",data:e})},getRoleIdsByUserId:function(e){return Object(o["a"])({url:"/".concat(l,"/getRoleIdsByUserId/").concat(e),method:"get",data:e})},saveRoleMenu:function(e,t){return 0===t.length&&(t=[-1]),Object(o["a"])({url:"/".concat(l,"/saveRoleMenu/").concat(e,"/").concat(t),method:"post",data:e,menuIds:t})},saveUserRole:function(e,t){return 0===t.length&&(t=[-1]),Object(o["a"])({url:"/".concat(l,"/saveUserRole/").concat(e,"/").concat(t),method:"post",data:e,roleIds:t})},list:function(){return Object(o["a"])({url:"/".concat(l,"/list"),method:"get"})},enable:function(e){return Object(o["a"])({url:"/".concat(l,"/enable/").concat(e),method:"put",data:e})},disable:function(e){return Object(o["a"])({url:"/".concat(l,"/disable/").concat(e),method:"put",data:e})}}}}]);